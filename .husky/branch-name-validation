# Copyright 2024 StarfleetAI
# SPDX-License-Identifier: Apache-2.0

#!/bin/sh
local_branch_name="$(git rev-parse --abbrev-ref HEAD)"
valid_branch_regex='^((hotfix|feature)\/[a-zA-Z0-9\-]+|develop|main)$'

message="
    There is something wrong with your branch name.
    Branch names in this project must adhere to this contract: (hotfix|feature)/(task-id)(task-description), 'develop' or 'main'. (ex. hotfix/AICW-0-fix-menu-position).
    Validation rule: '^((hotfix|feature)\/[a-zA-Z0-9\-]+|develop|main)$'
    Your push will be rejected.
    You should rename your branch to a valid name and try again.
"

if [[ ! $local_branch_name =~ $valid_branch_regex ]]; then
    echo "---------"
    echo "$message"
    echo "---------"
    exit 1
fi

exit 0
